:root{
  --accent:#fff945;
  --glass:#0008;
  --border:#063;
  --borderGlow:#0a6;
}

*{ box-sizing:border-box }
body{
  margin:0;
  background:#17b88b;
  color:#fff;
  font-family:sans-serif;
  overflow:hidden;
}

/* ===== Top UI: instruction + banner (center, top) ===== */
.top-ui{
  position: fixed;
  left: 50%;
  top: 20px;
  transform: translateX(-50%);
  z-index: 2000;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  width: min(1600px, 92vw);
  pointer-events: none; /* tr√°nh ch·∫∑n t∆∞∆°ng t√°c d∆∞·ªõi */
}

/* Instruction l·ªõn, cƒÉn gi·ªØa */
.instruction-bar{
  color: #fff945;
  font-weight: 900;
  font-size: clamp(22px, 3.3vw, 40px);
  text-align: center;
  text-shadow: 0 2px 10px #0008;
}

/* Banner v√†ng ch·ªØ tr·∫Øng, n·∫±m ngay d∆∞·ªõi instruction */
.nohand-banner{
  background: #fff945;      /* n·ªÅn v√†ng */
  color: #000000;              /* ch·ªØ tr·∫Øng nh∆∞ y√™u c·∫ßu */
  font-weight: 900;
  border-radius: 12px;
  border: 3px solid #ffeb3b;
  box-shadow: 0 6px 18px #0007, 0 0 12px #fff945aa;
  padding: 10px 14px;
  letter-spacing: .2px;
  font-size: clamp(14px, 1.6vw, 20px);
  display: none;            /* ch·ªâ b·∫≠t khi kh√¥ng detect */
}

/* ===== Center Message (restart, notices) ===== */
.center-msg{
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  color: #fff945;
  font-weight: 900;
  font-size: clamp(36px, 4vw, 48px);
  text-align: center;
  text-shadow: 0 2px 10px #0008;
  z-index: 2000;
  display: none;
}

/* ===== Boundary ===== */
.playfield{
  position: fixed;
  top: 100px;
  left: 40px;
  right: 40px;
  bottom: 40px;
  border: 6px solid var(--accent);     /* üëâ vi·ªÅn v√†ng */
  box-shadow: 0 0 0 2px #000 inset, 0 0 20px var(--borderGlow) inset, 0 0 30px #0008;
  border-radius: 20px;
  z-index: 1;
}

/* ===== Debug / Camera ===== */
.debug_window{
  position:fixed;
  bottom:12px;
  left:12px;
  z-index:30;
}

/* Always show canvas; video hidden */
.input_video{ display:none }
.output_canvas{
  display:block;              /* lu√¥n hi·ªÉn th·ªã */
  width:500px;                /* üëâ tƒÉng c·ª° theo y√™u c·∫ßu */
  height:auto;
  border-radius:24px;
  background:#0004;           /* n·ªÅn m·ªù */
  box-shadow:0 0 40px #fff945aa;  /* qu·∫ßng v√†ng nh·∫π */
  border:4px solid #fff945;        /* üëâ vi·ªÅn v√†ng */
}


/* ===== Cursor: gold ring ===== */
.cursor.wand{
  position:fixed; left:0; top:0; width:0; height:0; pointer-events:none; z-index:1000;
  transition: transform .06s linear;
}
.cursor.wand::after{
  content:''; display:block; width:40px; height:40px; border-radius:100%;
  transform:translate(-50%,-50%);
  background:transparent; border:3px solid #f6d23e; box-shadow:none;
}
.cursor.wand.is-pinched::after{
  box-shadow:0 0 8px 4px rgba(246,210,62,.8), inset 0 0 4px rgba(246,210,62,.8);
}

/* ===== Ducks ===== */
.duck *, .duckling *{
  background-size: calc(var(--w)*var(--m)) calc(var(--h)*var(--m)) !important;
  background-repeat:no-repeat !important;
  image-rendering:pixelated;
}
.duck, .duckling{
  position:absolute; transition:1s;
  --w:20; --h:14; --m:2.6px; --neck-w:16;
  width:calc(var(--w)*var(--m)); height:calc(var(--h)*var(--m));
  --dark-yellow:#fcc85b;
}
.duckling{ --m:1.3px }

/* Mother sprites (white) */
.body{
  position:absolute; width:calc(var(--w)*var(--m)); height:calc(var(--h)*var(--m));
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAAXNSR0IArs4c6QAAAFRJREFUOE9jZMAC/v///x+bOLoYIyMjI4YYsgCxBuEzGG4DuYbBDIe5FmwgpYYhG0p9A6nlOrgrR6CBgz+WYbFDaeSgJGxKDUXO0xiZm5QwxVY4AADV9Tf/s/CuJAAAAABJRU5ErkJggg==)
}
.tail{
  position:absolute; --w:6; --h:7; --x:calc(7*var(--m)); --y:calc(-2*var(--m));
  width:calc(var(--w)*var(--m)); height:calc(var(--h)*var(--m)); z-index:-10; transition:1s;
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAHCAYAAAArkDztAAAAAXNSR0IArs4c6QAAAC1JREFUGFdjZICC/////wcxGRkZGcE0iIAJwhSBJHFLoKuG68IpgdcOZEmYvQA6WRwAeFIlLwAAAABJRU5ErkJggg==);
  transform:translate(var(--x),var(--y))
}
.up .tail{--y:calc(-2*var(--m))} .down .tail{--y:calc(-4*var(--m))}
.right .tail{--x:calc(-2*var(--m))} .left .tail{--x:calc(15*var(--m))}
.neck{ position:absolute; width:calc(var(--neck-w)*1px); height:calc(8*var(--m)); bottom:0; transition:.8s }
.neck-base{ position:absolute; width:calc(8*var(--m)); height:calc(8*var(--m)); --x:calc(6*var(--m)); --y:calc(2*var(--m)); transform:translate(var(--x),var(--y)); transition:.3s; z-index:2 }
.up .neck-base{--y:calc(2*var(--m))} .down .neck-base{--y:calc(3*var(--m))}
.right .neck-base{--x:calc(10*var(--m))} .left .neck-base{--x:calc(2*var(--m))}
.head{
  position:absolute; --w:20; --h:16; width:calc(var(--w)*var(--m)); height:calc(var(--h)*var(--m));
  margin-top:calc(var(--h)*-2px + 4px); margin-left:calc(((var(--w)*2) - var(--neck-w)) * -0.5px)
}
.down .head{ background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAAAXNSR0IArs4c6QAAAJZJREFUOE9jZKAyYKSyeQw4Dfz///9/fJYxMjJi1YshSMggdEvQDUYxkFTDYIYjGwo3kFzD0A0dogZmmUowTDv9Am+KQlcDC0esXqa6geQkdgwXggxBj+m/J6Oxms1svhRFHGuygamAGYrLMJg6mKF4EzZM8Z8TUXizHUwdi8UyjJyGMy8TMhSbYSCL8JY2uAzFZRjIQAA6bUoRLru2rQAAAABJRU5ErkJggg==) }
.up .head{ background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAAAXNSR0IArs4c6QAAAIFJREFUOE/t01EOgCAIBmBZ3anOUuers9SdajgfcGr8NNl6yzfH/BBBCsa6joW18DjvhI7BAMIEQqgKJmyYNuvy4T7XoKEPkJnVMmGJRJVRbXoxSUIFmkEv1qI/aE6KGZTGfPeGKb230+rYSD29aIklA/7lN7iF8jz626CfhDf0Joo7dzsRfj//OAAAAABJRU5ErkJggg==) }
.left .head,.right .head{ background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAAAXNSR0IArs4c6QAAAIBJREFUOE9jZKAyYKSyeQw4Dfz///9/fJYxMjJi1YshSMggdEvQDUYxkFTDYIYjGwo3kFzD0A0dOAOzTCUYpp1+gTOeYN4m2oUkG/jnRBTWZMJsvpSopIriQlyGwUwixlC4gYQMI8ZQjGRDyFB8LsSZsEkNQ6KzHlExgEcR1UsbAK27NhEDLz+RAAAAAElFTkSuQmCC) }
.right .head{ transform:scale(-1,1) }
.legs{ position:absolute; display:flex; justify-content:space-between; width:calc(12*var(--m)); height:calc(7*var(--m)); left:calc(4*var(--m)); bottom:calc(-4*var(--m)); transition:1s; z-index:-1; --angle:180deg }
.leg{ position:relative; background:var(--dark-yellow); width:var(--m); height:calc(7*var(--m)) }
.leg:after{ content:''; position:absolute; left:-1px; bottom:0; width:4px; height:7px; background:var(--dark-yellow); transform-origin:bottom center; transform:rotate(var(--angle)) }
.up .legs{--angle:0deg} .up.right .legs{--angle:45deg} .right .legs{--angle:90deg} .down.right .legs{--angle:135deg}
.down .legs{--angle:180deg} .down.left .legs{--angle:225deg} .left .legs{--angle:270deg} .up.left .legs{--angle:315deg}
.waddle .leg{ animation:waddle .3s infinite }
.leg:nth-child(1){ --one:calc(7*var(--m)); --two:calc(4*var(--m)) }
.leg:nth-child(2){ --one:calc(4*var(--m)); --two:calc(7*var(--m)) }
@keyframes waddle{ 0%,100%{height:var(--one)} 50%{height:var(--two)} }
.left .legs,.right .legs{ width:calc(10*var(--m)); left:calc(5*var(--m)) }

/* ===== Yellow duckling sprites (unchanged) ===== */
.duckling .head{
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAAAXNSR0IArs4c6QAAAGFJREFUOE9jZKAyYKSyeQw4Dfz/wfc/PssYBTZj1YshSMggdEvQDUYxkFTDYIYjGwo3kFzD0A0dNZD8VAmLGNqFIcht5MY01mQD8yyphuJN2MghSMhgorMe+dEC0Un10gYAfowwEW4KJvUAAAAASUVORK5CYII=);
  margin-left: calc(((var(--w)) - var(--neck-w)) * -0.5px);
  margin-top: calc(var(--h) * -1px + 2px);
}
.duckling.down.left .head,
.duckling.down.right .head{
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAAAXNSR0IArs4c6QAAAIVJREFUOE9jZKAyYKSyeQw4Dfz/wfc/PssYBTZj1YshSMggdEvQDUYxkFTDYIYjGwo3kFzD0A2lrYFZLqfAFk7bY4Y1PvDJw7yN4sLBbyAliRzDy39ORGFNyMwanwnag5FscBkGMwmfoRgJm5BhuAzFm/UIGcpisYzoQgSuEJehpBgG8g0Az0pNESONMLcAAAAASUVORK5CYII=);
}
.duckling.up.left .head,
.duckling.up.right .head{
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAAAXNSR0IArs4c6QAAAIFJREFUOE9jZICCPyei/sPYyDSLxTJGbOK4xMCKcRkG00SKoYzYDGPW+EzQUYwCm7G6HMOFxBiGbBu6wXBbQC4l1TCYwciGwg38/8EXa6QQ9DtUAczQUQOJDTFMdbQPQ5Cd5MY01mQD8wSphuJM2OihQshgvFmP/KjAEjnUNAxkFgDi4TsRTK7K8AAAAABJRU5ErkJggg==);
}
.duckling.down .head{
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAAAXNSR0IArs4c6QAAAJdJREFUOE9jZKAyYKSyeQw4Dfz/wfc/PssYBTZj1YshSMggdEvQDUYxkFTDYIYjGwo3kFzD0A2lj4FZLqfAFk/bY4Y1XrDJw7yN1YWD30ByEjuGl0GGoMf03xu8WM1m1viMIo412cBUwAzFZRhMHcxQvAkbpvjPiSi82Q6mjsViGUZOw5mXCRmKzTCQRXhLG1yG4jIMZCAAfBdQEXRmcAUAAAAASUVORK5CYII=);
}
.duckling.up .head{
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAAAXNSR0IArs4c6QAAAIRJREFUOE9jZMAD/pyI+o9NmsViGSMubTglcBkGMwiXoVgNBBnGrPEZn+MZ/t7gZcBmKIaB/z/4YvUmTi8KbEYxA4VDqmEwSxiRDIUbSK5h6IaOGog3peCVhEUM7cIQZD25MY012cD8Q6qhyIaBzMCZlwkZjG4QPD2SHw3YdeJ0IbkWAQBsyTsRjEgDjwAAAABJRU5ErkJggg==);
}
.duckling.left .head,
.duckling.right .head{
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAAAXNSR0IArs4c6QAAAH9JREFUOE9jZKAyYKSyeQw4Dfz/wfc/PssYBTZj1YshSMggdEvQDUYxkFTDYIYjGwo3kFzD0A0l2sAsl1NgvdP2mGENWpgrh5CBf05EYU0mzBqfiUqqKF7GZRjMJGIMhRtIyDBiDMVINoQMxedCnAmb1DAkOusRFQN4FFG9tAEAKQA+EfjQv5MAAAAASUVORK5CYII=);
}
.duckling.right .head{ transform:scale(-1,1) }
.duckling .body{
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAAXNSR0IArs4c6QAAAFRJREFUOE9jZMAC/n/w/Y9NHF2MUWAzI4YYsgCxBuEzGG4DuYbBDIe5FmwgpYYhG0p9A6nlOrgrR6CBgz+WYbFDaeSgJGxKDUXO0xiZm5QwxVY4AADr4DT71oa+KgAAAABJRU5ErkJggg==);
}
.duckling .tail{
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAHCAYAAAArkDztAAAAAXNSR0IArs4c6QAAAC1JREFUGFdjZICC/x98/4OYjAKbGcE0iIAJwhSBJHFLoKuG68IpgdcOZEmYqwCKgxp+Dp/FvAAAAABJRU5ErkJggg==);
}
.duckling .leg:after{ height:3px; width:2px; left:0; bottom:0 }
.duckling.waddle .leg{ animation:waddle .2s infinite }

/* ===== Text FX ===== */
.fx-quack{
  position:fixed; pointer-events:none; color:#f6d23e; font-weight:800;
  text-shadow:0 2px 10px #0008; transform:translate(-50%,-50%); z-index:1200;
  animation: quack-pop 1000ms ease-out forwards;
}
@keyframes quack-pop{
  0%{ opacity:0; transform:translate(-50%,-10%) scale(.90) }
  20%{ opacity:1; transform:translate(-50%,-50%) scale(2) }
  100%{ opacity:0; transform:translate(-50%,-120%) scale(1.05) }
}
.fx-plus{
  position: fixed;
  left: 50%; top: 50%;
  transform: translate(-50%, -50%);
  background: #fff945; color: #013;
  padding: 18px 28px; border-radius: 999px;
  font-weight: 800; font-size: clamp(20px, 3vw, 30px);
  letter-spacing: 0.5px;
  border: 4px solid #ffeb3b;
  box-shadow: 0 8px 28px #0007, 0 0 20px #fff945aa;
  z-index: 1200; animation: plus-fade 900ms ease-out forwards;
}
@keyframes plus-fade{
  0%{ opacity:0; transform:translate(-50%,-52%) scale(.9) }
  20%{ opacity:1; transform:translate(-50%,-50%) scale(1) }
  100%{ opacity:0; transform:translate(-50%,-60%) scale(1.05) }
}
